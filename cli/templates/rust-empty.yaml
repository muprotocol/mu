name: empty
lang: rust
files:
  - path: Cargo.toml
    #TODO: replace `musdk` path with published one on Crates.io
    contents: !String |-
        [package]
        name = "{{name}}"
        version = "0.1.0"
        edition = "2021"

        [dependencies]
        musdk = { git = "https://github.com/muprotocol/mu/sdk/musdk", branch = "master" }
    args:
      - name
  - path: src/main.rs
    contents: !String |-
        use musdk::*;

        #[mu_functions]
        mod my_functions {
            use super::*;

            #[mu_function]
            fn greet_user<'a>(_ctx: &'a MuContext, name: &'a str) -> String {
                format!("Hello {}, welcome to Mu", name)
            }
        }
    args:
      - name
  - path: stack.yaml
    contents: !String |-
        name: {{name}}
        version: 0.1
        services:
          # You can add `Database` Service if you want
          # - type: Database
          #   name: my_db
          - type: Function
            name: my_functions
            binary: http://localhost:8080/{{name}}.wasm # Replace this with the url to your wasm file
            runtime: wasi1.0
            memory_limit: 256MiB
            env: {}
          - type: Gateway
            name: my_gateway
            endpoints:
              /say_hello/to/{name}:
                - method: get
                  route_to: my_functions.greet_user
    args:
      - name
commands: []
